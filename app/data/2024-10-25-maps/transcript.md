 Hoy te voy a enseñar a integrar Google Maps dentro de una aplicación en Angular y no de la forma cotidiana. Si bien la comunidad tiene unas librerías increíbles para integrar Google Maps, hoy vamos a utilizar la librería directamente creada por el equipo de Google basada en componentes para poder hacer esta integración. Y es una integración literalmente pensada en componentes que fueron creados para Angular y que funcionan muy bien en Angular. Así que, no siendo más, vamos a empezar. Para hacer la integración me voy a basar en lo que tiene Starbucks para poder renderizar como las locaciones de sus negocios y básicamente me voy a inspirar en esta integración. Es decir, eso es lo que más o menos voy a querer lograr. Es decir, yo tengo una lista aquí como de sitios y acá tengo un mapa que se me renderiza y fíjense que hay una integración como entre un lado y el otro. Es decir, no solo renderizo el mapa, sino que de una forma interactiva, por ejemplo, yo puedo navegar como por estos puntos y pues él me va llevando como a la locación. Por ejemplo, si yo hago hover en varios de los puntos, como que aquí se va conectando el mapa. Acá podemos ver cómo se va conectando el mapa a esos puntos. Y bueno, si yo le hago zoom acá o le hago clic a uno de estos puntitos, como que me lleva a esa específica locación en donde se encuentra ese store, esa tienda de Starbucks. Entonces, en este sitio me voy a inspirar para crear el mío y generar una integración como esta. Para ello voy a trabajar. En un website que yo ya había trabajado, que normalmente lo tengo como ejemplo, que es pues un e-commerce. Acá tengo como filtros por productos, por ropa, en el cual pues voy filtrando, pero me creo una página en vacío llamada Locations, en el cual pues es como nuestro lienzo en blanco en el cual vamos a trabajar. Sin embargo, me voy a enfocar más en la integración de Google Maps que en el layout. Como que en el responsive ya voy a tener como un markup que es como HTML. By the way, estoy utilizando Tailwind. Entonces. Pues casi es copiar un poco el markup que tengo de Tailwind, pero me voy a enfocar en la integración. Bien, vamos a ver un poquito el código. Si miro el código de mi proyecto, al final lo que hice fue crear una página sencilla como es una standalone component. Simplemente pues es una, pues es un componente que va a renderizar esta página en específico y lo tengo pues en el routing. Es decir, acá tengo Locations y cargo ese componente en específico. Y este componente que tiene no tiene nada del otro mundo. Tiene un HTML. Tiene por si un sign al que va a tener las vocaciones, pero si nos fijamos bien es una Rey en vacío. Eh tienen typing, es decir, yo espero que cada location tenga un nombre, una descripción, una latitud y una longitud. Bien y hablemos del marca precisamente el marca que tengo acá. Como te venía diciendo, es simplemente algo de Tailwind. Puede mejorar todavía para hacerlo más responsive, pero por ahora creo que con este me va bastante bien. Entonces acá tengo como una sección, esta sección que tengo como la lista o voy a renderizar como la lista de Locations. Y por aquí es donde yo quiero renderizar el mapa. Entonces eso es simplemente lo que tengo listo. Por ejemplo, ahorita ya estoy haciendo un for, solo que como por ahora es un array en vacío, pues simplemente no está renderizando nada. Pero si yo coloco aquí pues un, una Location. Vamos a ver si me autocompleta. Ahí está. Me autocompleto de forma inadecuada. Porque pues yo no tengo. Adres o un City o un State, simplemente debería tener un Description. Vamos a ver Description. Qué más tiene que tener la Location, Latitud y Longitud. Entonces aquí podríamos probar con una. Eh Latitud y una Longitud y ahí ya me darían typing correcto. Por ahora no tengo una Latitud y Longitud exacta, pero simplemente quiero ver que renderice esta lista. Veamos si recargo por acá. Ah bueno. Creo que no tengo todavía el proyecto al aire. Entonces vamos a limpiar aquí mi consola. Hacer un poquito más de zoom. Y hacer un ng-swerve. Y entonces ya ahí está corriendo. Vamos a ver que ya funcione. Listo. Acá literalmente ya estoy renderizando pues ese Location. Si renderizo otro, es decir, tengo Location 2. Y pues aquí tengo Location 2. Es simplemente algo sencillo. Tengo una lista. Vamos a empezar a trabajar en ello. Pero pues vamos a integrarlo con Google Maps. Recordemos que al final esto un poco es lo que quiero llegar. Para tener estas Locaciones, algo muy interesante es que tú puedes generar como un Array de Locaciones como genéricas. Eh o normalmente lo que haces es conectarte a una base de datos. Normalmente yo lo que espero aquí, por ejemplo, de un sitio como Starbucks, es que se conecte a una API que le esté mandando a todas las Locaciones. Y fíjense que hay algo muy interesante acá. Aquí hay un Query Param en donde se le está enviando un poco la ubicación. Eh o el centro del mapa. Y en base en ello va renderizando. Normalmente aquí se utiliza la Locación del usuario pues para saber en dónde está ubicado. Por ejemplo, si yo accedo como yo estoy en Bolivia y literalmente en Bolivia no hay Starbucks o en Cochabamba al menos no hay Starbucks, solo en Santa Cruz. Entonces si yo hago un Reload, él va a tomar como mi Locación que es esta en este momento. Y me va a decir que no encontró como, como pues Starbucks acá. Sé que hay unos en Santa Cruz, no sé por qué. No sabría por qué no aparecen, no sé por qué no se mapean. Pero al menos en Cochabamba no hay Starbucks. Pero fíjate que él automáticamente tomó como mi Locación actual y pues empezó a buscar. Ahora si yo ya manualmente me voy a Bogotá. Vámonos para Bogotá, por acá queda Bogotá. Automáticamente como que el, este Query Param se va como actualizando. Y ahí sí van apareciendo las Locaciones relacionadas a ese lugar. Esa integración es un poquito más complicada. Entonces lo que voy a hacer es. Sí basarme en una Locación. Por ejemplo, voy a tener la Locación de Bogotá. Vamos a abrir Google Maps y acá vamos a buscar Bogotá. Acá Google Maps Bogotá. Vamos a buscar, bueno acá me apareció. Acá si yo le hago literalmente clic a Bogotá. Aquí me va a aparecer como esta Latitud, Longitud que esta es la que quiero lograr un poco. Es como un punto inicial. Entonces yo podría marcar este punto inicial. Y hay una API que yo creé especialmente para este tipo de pruebas. Te puedes conectar a ella. Espero en su momento ponerla también en la Fake Store de Platzi. Pero por ahorita está funcionando acá. ¿Qué hace este Endpoint? Simplemente te envía Locaciones al azar. Lo cual nos va a permitir renderizarlo. Ahora, ¿qué es lo interesante de este Endpoint? Pues que me envía el ID y la descripción. Pero algo interesante es que si yo le digo cuál es el origen. Por ejemplo, creo que este punto inicial. Es el de Bogotá. Si yo le envío este o el de Cochabamba. Alguno de los dos. Pongamos el de Bogotá. Entonces acá está la Latitud. Entonces este sería este puntito. Latitud. Y la Longitud. Ese sería el "-74". Por acá. Entonces si yo le mando esa Locación. Me va a enviar puntos. Como aleatoriamente puntos. Pero que estén cercanos a esa área. Y fíjense. Que por acá tengo un Site. Cuántos puntos quiero. Entonces si yo quiero 5 puntos. 10 puntos. Pues él me va a enviar un listado de puntos. Que estén cerca de esa área. Con eso vas a poder, por ejemplo. Pues hacer pruebas un poco más. Específicas a una Locación. O puedes crear tu Array de Locaciones. Y todo bien. Por ahora yo me voy a conectar a este API. Como para obtener estos puntos. Y son los que voy a renderizar. Y simplemente pues. Basada en esa Latitud y Longitud. Pues voy a obtener este listado. De cuántos puntos? 10 puntos. Entonces me copio ese Endpoint. Y vamos a nuestro proyecto. Y fíjate que yo ya tengo un servicio. Llamado. Locations. En la cual tengo algo interesante. Tengo mi Endpoint. Que es la URL. Literalmente es esta URL. api.nicovites.store Y luego tengo. Locations. Luego podría enviarle el Origen. Entonces tengo que enviarle el Centro. Con su Latitud y Longitud. Fíjate que el tamaño no lo tengo. Entonces lo puedo poner aquí como un poco quemado. Sites. y digamos le envío un 10. Quiero 10. También lo podría recibir como parámetro. Y automáticamente pues ponerlo. Entonces lo que tengo que tener aquí. Es una Latitud y Longitud. Y pegarle como a este servicio. Entonces que voy a hacer. Básicamente voy a inyectar ese servicio. Entonces vamos a ponerle aquí. Un read only. Vamos a ponerle aquí. LocationsService. Y vamos a inyectarlo. Entonces acá tengo la inyección. LocationsService. Vamos a agregarlo. Ahí está LocationsService. Ese es mi servicio. Y ahora pues yo puedo hacer un request. Y voy a utilizar. ToSignOut para poder hacer ese request. Acá. ToSignOut. Este debería autocompletarme. No. Pues lo vamos a hacer nosotros. ToSignOut. ToSignOut. ToSignOut. A veces el autocompletado se pone fastidioso. Ya. Entonces esta es una función que debería venir. Desde RxJS. Del Interop. Déjame lo tomo de allá. RxJS. Core. Si viene desde Core. Y viene desde RxInterop. Y lo llamo. ToSignOut. Perfecto. En ToSignOut lo que tengo que hacer es. Pues llamar a mi servicio. O la función que yo quiero. GetLocations. Van a dar la latitud, longitud. Y una buena práctica. Podríamos separarlo un poquito. Es decir. Aquí guardar el observable. Que sería este. Locations. Y esto es igual a. Pues esa función en específico. Y este observable. Que sería ToSignOut. Entonces aquí envío esto. Y es básicamente lo mismo. Y tengo un initial value. Que sería este punto. Ahora si esto les parece raro. Todo esta como líneas de código les parece raro. Recuerden que en mi canal ya hablé de ToSignOut. Ya hablé porque se pone este hashtag. Que es la forma nativa de agregar. Atributos privados. Y de por si esto es aliviarme un poquito. De la integración con Google Maps. Acá estoy haciendo casi un request. A una API. Simplemente para obtener puntos. Los cuales voy a renderizar. Aquí voy a enviar mi puntito. En este caso sería la latitud. La longitud. Ahí esta la latitud. Y pues debería renderizar. Esos puntitos. Vamos a ver si funciona. Aquí ya me dice que no estoy utilizando Location. Yo creo que lo voy a utilizar más adelante. Pero por ahora veamos si ya. Renderizo. Listo. Acá tengo 10 puntitos. Con nombres al azar. Ya tiene un scroll. Entonces lo que yo necesito es ahora. Que cada uno de esos puntitos. Primero se renderice aquí. Y también tengan interactividad. Así que ya teniendo esto. Teniendo tus puntitos. Sea utilizando esta API. Que te da puntos al azar. O sea teniendo un listado quemado. O otra forma. Pero simplemente necesitamos algunos puntos. Que nos permita renderizar. Ahora si cual es esa forma especial. Hubo cinco versos. No ideal한테 vamos a ver. Ok pues mira. Y tus puntos al azar. Dá a esto. Y si puedes. Infocuzzle ti. Entonces si luego. Cuando sea necesarias. Soncast musiclínet irritos. Hay mucho . Y si te puedes ahonder. YIE ahsby Okay. Muy bien. Luego también tienes. O sea, tú no encuentras esto, por ejemplo, en la documentación de Angular.dev. Si por ejemplo le dices, hey, quiero el componente de Google Maps, no aparece nada y mucho menos en Angular Material. Si yo busco en Angular Material, por ejemplo, que son como los componentes que ellos crean también nativamente, si yo busco no hay nada que me diga que hay un componente nativo para utilizar Google Maps. Es decir, esa documentación está re escondida y si uno va y la revisa, está dentro de un repositorio que ellos llaman Angular Components y por acá ellos tienen varios componentes interesantes. Tienen pues Angular Material, que ya es la implementación de Material Design con Angular, pero tienen otros, tienen el CDK, tienen Angular Google Maps y tienen uno para YouTube. Entonces Angular Material, pues ya sabemos que es un set de componentes basados en Material, muchos componentes, no es solo uno, es todo un set de componentes, pero Angular Google Maps es uno. Yo creo que si tú eres un usuario especializado, pues precisamente en la API de Google Maps, no tienen ningún aspecto visual, es decir, no es que vayamos a implementar Material Design, funciona agnóstico a lo que tú quieras implementar en UI, pero esta es la librería oficial y mantenida por Angular. ¿Que por qué no está en la documentación? Realmente todavía no lo sé. La documentación es esta, es un README, entonces vamos a empezar a integrarlo. Lo primero que nos dicen es que hagamos un ng-add. un ng-add como que hace configuraciones dentro de nuestro repositorio, pero en esta ocasión lo podemos instalar con un npm o un yarn, porque realmente solo hace la instalación del componente, no hace ninguna modificación más, entonces vamos a correr este comando dentro de la terminal, pero básicamente lo que quiero hacer ahorita es agregar Angular Google Maps, ah me dice que este paquete ya lo había instalado en este repositorio, vamos a verlo que ya está instalado, entonces vamos a ir al package.json y vamos a ver que acá tengo Angular Google Maps, tengo estas versiones pero si tú estás trabajando con otra simplemente utiliza la versión que pues instálalo en el momento adecuado para ti y simplemente esto va a variar, como es la integración nativa de Angular o los componentes directamente trabajados para Angular y Google Maps entonces va a trabajar bastante bien y no va a cambiar mucho, así que no te preocupes en qué versión ahorita estés trabajando, simplemente va a funcionar bien pues siguiendo los pasos, listo entonces ya la tengo instalada o ya la había instalado, listo, entonces ya tengo instalada ahora, lo que sí necesito es una key, Google Maps es un proyecto que necesito, que funciona como un servicio, necesito una key que me da Google para poder integrar Google Maps y para tener esa key necesito un proyecto dentro de Google Cloud o Google Console, entonces aquí sí o sí tienes que abrirte una cuenta de la plataforma de Google para obtener una key de Google Maps, vale, entonces aquí te dicen cómo setear un proyecto entonces nos dicen crear un proyecto luego habilita la API y luego obtén la key voy a tratar de hacer este proyecto de hacer como esos pasos para que esté como el tutorial completo entonces voy a entrar a consolecloud.google.com acá básicamente esta es como la landing es más, si yo borro aquí por defecto vamos a ver ahí ya me dice como me da un welcome, me dice esta es mi organización todo bien, entonces aquí me dice pues las organizaciones, que proyectos tengo creo que si yo no le da aquí creo que puedo acceder a los proyectos, en fin yo le voy a decir new project y acá le voy a decir esto es Nico Store es un proyecto nuevo pertenece a una organización si, simplemente la creo y listo entonces ahí cree el proyecto entonces ya cree el proyecto ahí está create project ahora vamos a habilitar la API entonces aquí podemos ir a Maps API Library Page directamente aquí nos dicen cómo o nos dicen en qué área pero si uno no lo encuentra normalmente puede ir déjame ver si lo encuentro aquí a APIs y servicios habilitar APIs y servicios entonces uno como que va hasta acá tiene que seleccionar el proyecto entonces voy a Nico Store ahí está acá me da el botón de habilitar APIs es más directo como el link que ya nos dio aquí el tutorial pero pues también está bien la forma de llegar hasta allí, acá por ejemplo me dice como muchas cosas que tiene pues obviamente los servicios de Google, yo puedo conectarme a Google Drive API, Google Chips YouTube, etcétera aquí como yo he trabajado bastante con la API de Google Maps que me aparecen como de primeras la que vamos a habilitar es Maps JavaScript API, fíjate que hay otras como Play 6 API bueno hay un montón si uno mira solo las que hay en Maps pues hay varias vamos a habilitar la de Maps y vamos a darle enable una vez dado enable lo habilitó básicamente lo que tengo que hacer es crear una Key ¿listo? una llave, un token pues para que me permitan renderizar ese mapita entonces una vez yo haga eso por acá ya debió habilitarse aquí ya automáticamente me creó una aquí al momento de crear pues de hacer el enable ya me creó una aquí, entonces esta la vamos a copiar, la vamos a tener en algún lado, por aquí la voy a pegar como si fuera un comentario, porque ahorita la voy a necesitar, pero pues simplemente ya no la dieron vamos a darle acá, me dice que restricciones tengo, yo puedo decirle que sea solo para website, para android apps, ahorita le voy a colocar que sea para websites aquí me dice por seguridad desde donde pueden acceder ahorita simplemente le voy a decir que desde cualquier lado, pero luego sería bueno simplemente controlar que solo mi website o mi dominio puede utilizar esta aquí simplemente ahorita la voy a configurar de esta manera y listo entonces ya debería tener una aquí aquí en credentials ya tengo una aquí que yo la podría volver a ver en caso de que no la hubiera copiado, genere la aquí todo bien hasta ese punto entonces vamos a ver ya generé la aquí y ahora lo que me piden es cargar la API, esta API se carga de una forma un poco más especial normalmente estamos acostumbrados a utilizar, no sé, una librería y poner Agile aquí, aquí lo que me piden es poner un script, lo bueno de este es que es dynamic, es decir no va a cargar todo desde el inicio, sino que solo cuando es necesario pues como que va, en el momento digamos que preciso va a empezar a hacerse el loading de la API de Google Maps entonces vamos a ir al index HTML y dentro del body, o sea por acá vamos a colocarlo y por aquí es donde nos piden la llave, esa llave no hay problema que quede como pública en nuestro, digamos que en nuestro código lo que tenemos que hacer es colocar la restricción correcta ¿no? desde qué dominio se puede ingresar pues como proteger nuestra aquí desde la consola de Google pero no hay problema que quede pues ahí digamos, ¿listo? entonces ahí ya la pude eh integrar y ahora sí, ahora sí vamos a renderizar un mapa entonces aquí lo primero que nos dicen es ok, tenemos el componente Google Maps ¿cómo lo vamos a renderizar? lo primero que nos piden aquí es importar esta parte que es como el componente básico para renderizar un mapa, entonces vamos a ir a, ahora sí vamos a ir a nuestro componente y vamos a cargar esta librería que si ya instalamos, pues ya deberíamos tener acceso y hacemos el correspondiente import, entonces lo ponemos ahí import, porque vamos a utilizarlo ¿no? luego lo que vamos a hacer es fíjate que acá nos piden un punto como central nos piden un centro, ¿bien? vamos a tener ese centro que debería corresponder a este mismo sin embargo aquí tenemos una forma clásica de cómo de hacerlo, es decir, aquí no estoy utilizando signals voy a aprovechar y utilizar signals entonces voy a transformar esto en un signal, quiero copiarme el typing entonces voy a decirle esto es un signal y tararán y esta es la latitud longitud, yo esperaría y puedo ponerle un typing y decirle pues espero que sea de este tipo, pero básicamente es una latitud longitud con ese número es más, si voy y lo reviso, es eso que tenga latitud, es una interfaz que tiene lat, long, con con number, es eso entonces fíjate que acá pues estoy usando un signal, yo podría conectar este signal con esto entonces yo podría enviar acá center entonces punto center y como es un signal me suscribo a él y le envío pues esa latitud longitud que por si ya esperaba mi locations que precisamente esperaba un tipo un center o un objeto de este tipo, entonces simplemente lo va a recibir, listo entonces tengo el punto central, fíjate que por acá también tengo un zoom, ese zoom también me va como a ayudar también lo voy a convertir en un signal y por ahora lo voy a poner en un 4, listo, ya tengo esas variables que más tengo, acá tengo como mover el mapa esto todavía no lo quiero hacer quiero simplemente renderizar entonces aquí me dicen en el html que yo debería hacer, entonces vamos a copiarnos el componente entonces vamos a ir acá en el markup que el markup pues es nuestro html y cierro ya, listo, entonces acá tengo como el el mapita, es más puedo utilizar este auto cerrado porque no va a ver nada adentro, pero pues él necesita ¿qué necesita? necesita un mapita un ancho y un alto un ancho y alto y luego necesitamos que le enviamos el centro, el centro que al final va a ser nuestro signal, entonces como es un signal lo vamos a suscribir a él y vamos a organizar un poco nuestro componente con esto ya debería funcionar, o sea ya cargamos literalmente el mapa la key le dijimos que íbamos a utilizar acá google map, en fin ya debería cargarlo y luego si no lo hicimos pues vamos a cargarnos algo en este área con esta dimensión y con ese punto veámoslo ahí está cargando está en loading, déjenme lo vuelvo a cargar ahí está y por acá está renderizando y por acá tenemos pues ya creo que tiene mucho zoom entonces por eso y creo que esta locación que le di no es la de, ah no, si es la de bogotá pero está como en un área por ahí rara pero listo, trabajamos con esa área ese creo que fue el puntico que elegí pero queda como por bogotá listo entonces ahí ya estamos pues renderizando ese puntito y fíjate que funciona creo que tiene mucho zoom y es que el zoom de por si no lo estamos enviando él tiene un zoom por defecto no sé cuál sea su zoom por defecto no sé si aquí me diga si uno no le envía el zoom cuál es el zoom por defecto pero pues se lo podemos enviar yo le podría decir aquí zoom y el zoom es como si tenía un zoom por defecto si tuviéramos una cámara acá por ejemplo me está diciendo supongo que esto no es un número entonces lo voy a asignar como un número porque el zoom tiene que ser un número y le pongo 12 manualmente le estoy poniendo 12 vamos a ver si eso es mucho o poco eso es poquito podríamos como que salirnos un poco más del mapa para verlo un poquito más de afuera vamos a ver, no creo que es al revés vamos a entonces darle 10 eso, ahí nos alejamos, ven? entonces cada vez que le hagamos menos valor es decir que si yo tuviera un 1 creo debería estar como casi hasta fuera del planeta pero si yo le de lo acerco aumento su valor como que voy aterrizando al planeta hasta un punto en que me puedo estrellar contra el planeta como que ya está muy cerca ya si quiero veo carreteras veo solo verde entonces voy a ponerle aquí 10 y creo que está bien listo ya renderizamos un mapita todo bien aquí hay un problema y es que está raro que nosotros tengamos un alto y un ancho aquí básicamente utilizando Tailwind pues lo que podemos hacer es que si nosotros tenemos un layout digamos que es responsive y que toma todo el área por ejemplo si nosotros vemos el padre de ese componente realmente tiene como aprovecha todo el espacio entonces lo que yo debería hacer es que Google Maps el componente de Google Maps tome el 100% del componente padre que ya tiene como un área que está bien distribuida dentro de mi aplicación entonces lo único que le voy a mandar acá es que su alto y ancho debería ser del 100% y ya depende de que tú tengas un buen layout para que tome ese 100% de forma responsive o no entonces fíjate que acá ya toma el layout y si yo lo crezco pues simplemente ahí va funcionando entonces ahí pues ya tenemos algo de sentido algo decente algo un poquito parecido a lo que tenemos en Starbucks nos falta pintar los puntos y otras cosas pero nos vamos acercando listo ahora una cosa interesante solo porque se puede y es este zoom recuerda que este zoom realmente creamos un signal para ella entonces en vez de ponerle ese 10 que ahorita está en 4 se lo voy a poner en 10 aquí también voy a poner que Zoom nos conecte o sea que sea un signal y lo tengamos entonces básicamente en vez de que más le ponga el valor ahí lo pusimos o sea que se que se nutra o que lea el valor que tenga Zoom dentro de nuestra lógica entonces no debe haber mucho cambio porque el valor es el mismo pero lo divertido de esto es que luego yo podría utilizar aquí un input y utilizando un ngModel que el ngModel soporta nativamente un signal no sé si sabían eso pero yo podría un ngModel enviarle directamente un signal sin necesidad de suscribirlo ni nada sino simplemente enviarle el signal puro y él va a funcionar y aquí estoy utilizando HTML esto no es ninguna librería ni nada es HTML puro que tiene un componente de rango le pongo un mínimo y un máximo y yo podría dinámicamente jugar con ese valor aquí me sale un error porque ngModel no encuentra de dónde sacar esta directiva es porque me falta integrar pues el paquete de forms o el módulo de formsModule acá está el formsModule y lo paso como parte de mi aplicación entonces ahora sí no hay ningún problema ya no tengo ningún problema acá le envío mi signal y eso lo que hace vamos a ver si ya me carga es que acá tengo un slide para mover y si yo lo muevo entonces pasa esto lo que estábamos jugando con el zoom un poco manualmente como cambiándole el valor pero ahora lo que hice fue pues conectar ese zoom al signal y el signal ya está haciendo como la actualización de ese valor y pues simplemente lo está actualizando de forma dinámica y se lo está enviando a mi mapita a mi componente de Google Maps entonces ya tengo esto puedo jugar un poquito aquí y ahí vamos a ir viendo cómo funciona esa integración entonces cool esta parte bien ahora puntos cómo renderizamos puntos ya tenemos un zoom o sea literalmente ya logramos renderizar el mapa logramos poner dinámica un zoom nos falta ahora renderizar este listado de locaciones en este mapa para eso vamos a irnos otra vez a la documentación y lo que vamos a hacer es utilizar el map marker bien entonces aquí el map marker nos dice hey mira tú puedes renderizar aquí te toca ya utilizar un map marker y empiezas a lo bonito yo creo que de esta integración es que es de forma declarativa es decir que ya dentro del componente de Google Maps puedo hacer un for de las positions y utilizar el map maker y simplemente enviar empezar a renderizar esos puntos sin embargo hay unas restricciones de map maker y esto tiene que ver con unas restricciones acá está dice nota en desde el 2024 o pues este Google Maps ha deprecado un maker class y consideramos o deberíamos considerar el uso de map advanced marker entonces voy a utilizar el map marker y voy a utilizar este solo porque pues aquí hay una nota o sea esto es más como legacy y nos dicen que deberíamos utilizar más este map advanced marker entonces también lo vamos a buscar por acá debe estar aquí map ahí está advanced marker lo feo es que no tiene documentación fíjate que no tiene un readme como los demás o sea si yo voy a un map marker tiene documentación los otros no entonces yo creo que le falta trabajo a la documentación aquí y puede ser también probablemente que por eso todavía no lo hayan oficializado aunque es raro porque realmente este componente ya lleva tiempo y no sé por qué todavía no está como en la documentación de Google Maps pero sí sé que es muy bien mantenido por el equipo de Google bien entonces cómo le vamos a hacer pues vamos a utilizar este el avanzado solo que la documentación se parece mucho o sea es la misma integración entonces aquí vamos a utilizar un map marker pero yo dije que iba a utilizar un map advanced marker entonces simplemente ese es el que voy a utilizar lo importo todo bien y entonces ahora qué vamos a hacer vamos a hacer un for este for entonces lo vamos a poner por acá como es declarativo entonces ahora sí tengo que tener un componente que tenga como un cuerpo porque dentro de él voy a hacer un for ahora aquí me piden este for y de dónde voy a sacarlo pues básicamente es casi el mismo que yo tenía aquí porque al final todas las locaciones las tengo ya en mi lista tienen la posición tienen todo entonces yo podría volver a repetir este como este renderizado y utilizar o empezar a a poner las opciones correctas aquí básicamente el componente no se llama map marker se llama map advanced marker y aquí es donde yo tengo que enviarle la posición y algunas opciones por ahora solo me voy a fijar en position el que necesita realmente él aquí va a estar en el for y aquí tiene si nosotros nos fijamos en el typing lo que recibe es una pues una posición que tiene que tener una latitud o longitud que tiene que tener lat en number y longitud en number qué quiere decir eso que aquí no me sirve el location que yo tengo porque el location tiene muchas cosas más tiene un id un nombre una descripción una latitud con como con toda la palabra o sea no tiene solo lat sino que tiene latitud y longitud entonces aquí lo que voy a hacer es pues un poco transformar enviarlo en jason y decirle mira la latitud está en location location punto latitud y luego la longitud está en location no se porque no me toco completar location longitud listo entonces básicamente lo que tengo es pues que manualmente le envié la posición basado en la iteración que estoy haciendo listo entonces eso debería bastar realmente eso debería bastar voy a quitar este voy a comentar este porque me molesta un poco que me esté marcando rojo luego vamos a ver en qué momento lo utilizamos pero listo entonces vamos a ver si ya tenemos marcas fíjate acá este es un error y dice que el mapa no fue cargado correctamente bla bla bla esto porque listo vamos a ver por qué vamos a ver por qué lo que pasa es que desde el uso básicamente y es más creo que también me parece el error debería aparecer en consola acá me dice oye tú necesitas un map id esto es parte de como de esos cambios que ha tenido google maps y para utilizar los marquers avanzados necesitamos generar un map id cómo vamos a solucionar este error básicamente buscando en google vamos a buscar en google vamos a hacer google map id ahí si vamos a buscar casi que es lo primero que nos aparece y nos dice que esto es una forma pues en la cual se optimiza el uso de google maps se protege también un poco la privacidad del proyecto y pues es como parte de esos cambios y lo que nos van a decir es que necesitamos ir a nuestro maps management page entonces vamos a ir allá y ahí vamos a crear un new map id bueno aquí yo ya estoy acá fíjate que me conecto a mi proyecto etcétera y vamos a crear un mapa id y le va a crear google maps un map y website le pongo una descripción le digo que esto va a ser para javascript aquí me dicen como cuál yo debería escoger y voy a poner este eraser y le voy a poner salvar listo me pide como un estilo realmente no voy a llenar esta parte simplemente lo que necesito es este entonces este id y si me devuelvo fíjate que acá ya tengo pues un google map id este id entonces yo voy a mi componente tampoco importa que yo lo tenga aquí como quemado es más lo voy a quemar aquí voy a poner map id y se lo voy a poner y ya es lo único que necesito entonces ahora sí me renderiza sin mayor dificultad acá entonces tenemos ya los puntos podríamos hacerle un poquito más de zoom y entonces como como había mencionado la api que es la que va a ser la api con base al punto la latitud longitud me generó 10 puntos como cerca de esa área eso es lo que hace esa api o ese endpoint que pues cree como para hacer ese tipo de demos entonces si yo le cambiara la latitud y longitud pues simplemente y le cambiara el número de puntos pues va a tener unos 20 puntitos digamos cerca al área de forma randómica es más si voy acá y le pongo 20 y pues todo vuelve a cargar fíjate que ahora tengo 20 puntitos como cerca al ese punto a latitud y longitud de esa área bien ahora creo que son muchos voy a poner 15 recuerda que esto puede ser dinámico así como le enviamos el latitud longitud pues podríamos enviarle también el número de puntos pero en fin ya estamos renderizando voy a hacerle un poquito más de zoom o sea como para no estar haciendo estar cambiando o estar moviendo acá voy a poner el zoom en 12 yo creo que es un buen zoom como para mirar esos puntos y 12 me gusta listo entonces resumiendo lo que llevamos hasta ahora ya realizamos nuestro mapa que sea el responsive ya lo renderizamos ya se ve podemos administrar el zoom creamos un mapa id y ahora tenemos markets hasta ahí ya podríamos dejar básicamente no como que hasta ahí ya podríamos hacer la integración pero nos falta algo interesante y es como una como una interacción entre esta lista de acá si me voy a trazar la de google maps como que si yo me muevo entre puntos como que hay una interacción y también si yo le hago clic como que me da información o me lleva hasta ese punto aquí en el listado vamos a hacer un poco ese tipo de interacción lo primero que voy a hacer es que cuando yo le haga clic a uno de estos puntos pues como que me lleve a esa locación como que me los entre no vamos a ver cómo hacerlo lo primero que yo podría hacer es literalmente poner un clic aquí en el map marker yo podría ponerle un clic sin embargo un error común y un error que yo cometí pues iniciando a integrar esto es que realmente él tiene su propio handler del clic realmente que yo tengo que utilizar es un map click y luego tengo que hacer una función que reciba ese clic entonces voy a ponerle market click listo market click va a recibir un clic y me va a recibir la locación ahora si me va a funcionar este location el import del location ahí está me va pues decir cuál es la locación y pues acá puedo hacer un console.log de el market que fue clickeado entonces acá yo podría hacer market click y acá le voy a enviar en vez de enviarle el event que luego va a ser interesante que es ese event pero básicamente lo que yo quiero enviarle ahorita es la location no entonces la location entonces qué va a pasar si yo voy acá y le hago clic y veo mi consola bueno aquí aquí no le hice clic a esta lista obviamente lo que le hice clic es al puntito fíjate que si le hago clic hace pan pan pan como que como que sea cuál le estoy haciendo clic ahora qué quiero hacer quiero abrir algo que se llama un info window que es un info window es básicamente se tiene que hacer que tú vas a google maps por ejemplo aquí y le das clic a uno de estos por ejemplo como que te aparece información al respecto no como modeli hay unas fotitos acá hay una tele unas fotitos con información entonces yo quiero que cuando se le haga clic pues aparezca información respecto a ese sitio como su nombre su descripción etcétera para eso entonces necesito hacerle clic y abrir un info window y luego el info window me lo puedo conectar a esta lista, entonces vamos por pasos, ya capturé el click, necesito ahora el InfoWindow, ¿cómo se hace el InfoWindow? acá también tengo, es algo común básicamente hacer esa integración del InfoWindow, casi que viene con el marker, entonces acá necesito este componente, entonces vamos a poner InfoWindow, MapInfoWindow, perfecto, vamos a incluirlo dentro de lo que yo estoy usando, y ¿cómo se usa? fíjate que acá lo que hacen es ponerle como un contenido al HTML, sigue estando dentro de Google Map, fíjate que acá está el como contenido, voy a ponerle mi contenido, y ese va a ser, ese es el InfoWindow, ahora ¿cómo lo relacionan? ¿cómo es que? pues yo abro el InfoWindow, fíjate que acá de alguna manera tengo que tener referencia a ese InfoWindow para abrirlo, y enviarle el marker que asociado a ese InfoWindow, entonces ¿cómo lo vamos a hacer? fíjate que para obtener la referencia se utilizó este This.InfoWindow, al final es un ViewShield, estoy haciendo uso de como estas formas de Angular para como consultar qué componentes tengo, y con base en eso, pues entonces poder interactuar con ellos, entonces vamos a copiarnos eso, pero vamos a utilizar Signals, porque recordemos que ya estas decoradores también se puede utilizar en forma de Signals, entonces yo lo que podría cambiar es esto, InfoWindow, y lo que voy a hacer es utilizar ViewShield, y decirle que es un MapInfoWindow, y listo, eso es, literalmente, esa es la forma ya de Signals, entonces, normalmente a lo que tienen como estas referencias visuales, me gusta colocarles Ref, entonces vamos a colocarle Ref, para saber que es una referencia hacia este componente o hacia este elemento que está en el HTML, normalmente también se le puede colocar un ID, y hacer referencia, pero pues si podemos utilizar el componente, o sea, como que él busca este componente dentro de mi HTML, dentro del componente como tal, pues va y lo busca, y obtengo la referencia de ese componente, entonces como ya tengo el InfoWindow, o la referencia, entonces podría hacer, this.infoWindow, Open, y abrir, pues el Marker, solo que acá le envié la Location, necesito el Marker, para obtener la referencia, fíjate que ya en la documentación, sobre todo el MapInfoWindow, lo que me dicen es, que necesito dentro del MapAdvancedMarker, crear esta referencia, entonces vamos a usar esta referencia, que está por acá, entonces se la pongo, ahí está, y este es nuestro Marker, vamos a ir otra vez, y fíjate que acá, literalmente le envían ese Marker, y la función se llama OpenInfoWindow, creo que es más bonita esa función, que MarkerClick, lo va a enviar, igual la Location todavía la podría como recibir, pero sin duda necesito también el Marker, y el Marker es de tipo MapAdvancedMarker, entonces aquí de por sí es el que están enviando, y por acá lo reciben, y pues, lo, pues como que lo abren, entonces aquí necesito enviarle, pues a OpenInfoWindow, le envío la Location, pero también le voy a enviar el Marker, listo, ahora este Marker en teoría, debería yo poderlo poner aquí, y debería funcionar, pero aquí hay algún error, porque no me dice literalmente, bueno, aquí hay un error sencillo, y es que esta referencia, al ser un Signal, necesito suscribirme, porque todos, para obtener su valor, necesito suscribirse, entonces yo necesito hacer esto, y ahí sí me va a tener la referencia de ese Info.Window, pero ahora sí me dice algo, me dice, oye, ya tengo la referencia, pero eso puede ser un Define, ¿por qué es un Define? Porque básicamente yo no le dije que este ViewChild es requerido, o sea, básicamente me dice, le estoy diciendo a Angular, oye, búscame si acaso, si hay un componente, que es MapInfoWindow, dentro de mi HTML del componente, pero no le estoy diciendo, que es requerido, que sí o sí tiene que estar, entonces aquí le voy a colocar Required, cuando es Required, no tengo, esa propiedad no puede venir en nulo, porque literalmente debería estar, y cuando compile, no me va a dejar compilar, porque ese componente debería estar, o sea, si yo no lo pongo, debería generarme un error, o sea, si yo no tengo un MapInfoWindow dentro de mi componente, debería generarme alguna clase de error, en el render o algo de esa manera, porque yo no lo tendría, y si esto empieza, a darme errores, bien, pero por ahorita lo voy a dejar, no quiero complicarme por ahorita, simplemente sé que tiene que estar Required, y pues ahí está mi componente, listo. Entonces, chalala, ahí ya puedo, literalmente, obtener referencia, con el Signal, abrirlo, y vamos a ver qué pasa, listo, entonces aquí vamos a ver, vamos a ver, si yo le hago click, bueno, lo que te comentaba, si el, si ese elemento no está, aquí lo que me hace, no es un error, me dice, oye, el, el MapInfoWindow es requerido, pero no lo encontró, eso es porque, pues, lo quité, ese es el error que te decía que, aparecía si el componente no encontró, o sea, ya manda un error, porque no es opcional, necesito ese componente, ¿no? A menos que realmente ese componente sea opcional para tu lógica, pues ya no sería requerido, pero en fin, si ya lo colocamos, fíjate que si yo le hago click, me abre el InfoWindow, este es el Location, con la información que tengo, pero, fíjate que cada vez que le hago click, pues automáticamente, cambia como el puntito al que le estoy haciendo click, y se va moviendo, y tengo, lo que no tengo es el contenido, o sea, el contenido está como de forma estática, que es el que yo puse acá, contenido, nosotros necesitaríamos variar ese contenido, o sea, si solo hay un MapInfoWindow, que se está como moviendo cada vez que yo le hago click, pero el contenido sí debería variar, entonces aquí ya no lo voy a quemar, entonces lo podría dejar como, como un componente que se cierra solo, y necesito ponerle contenido, y el contenido lo voy a sacar de Location, recordemos que Location tiene un nombre y una descripción, entonces podría utilizar esos atributos, para enviarle ese contenido a mi Marker, ¿cómo lo hago? vamos a verlo, básicamente uno se puede crear como un HTML, manualmente aquí como en el, como en esta función, por ejemplo acá yo le puse un Content, que tiene un H1, tiene el Location.name, y tiene un párrafo con una descripción, bien, aquí fíjate que lo que hace es que, el OpenMarker recibe tres funciones, bueno tres variables, uno que es el Marker como tal, otro que es el ShowFocus, y el otro el contenido, entonces aquí el Focus lo va a enviar a este momento en Folds, y luego le puedo enviar el contenido, Content, bien, y el contenido pues es este, es este que este HTML que acabo como de armar acá, entonces vamos a probarlo, vamos a ver, aquí que si yo hago click, ahí ya entonces tengo, ya lo tengo, ya la información, no, ahí está, ahí está, eh, y para eso también necesitaba Location, el Location, necesito el Location, eh, es más creo que un H1 está muy grande, creo que debería, aunque podría cambiar esto, un Text, Text XL, creo que podría hacer para que no sea tan largo, tan grandote, ya y creo que mejor un poquito, pero bueno, en fin, ya uno puede jugar un poco con el estilo del InfoWindow, lo importante es que ya nos abre por cada click en cada marker, y segundo que tenemos un InfoWindow pues relacionado a él, listo, ahora teniendo esto, nos queda nuestra última partecita, y es que yo quisiera hacerle click aquí a esta parte, como a estas partes del del ítem, y que igual me hiciera la opción de abrir ese punto, no como que esté conectada esta lista con el mapita, ¿cómo logró eso? ¿cómo logró esta interacción? aquí ya hay un poquito de, de suerte, ¿no? de saber cómo funciona Angular, cómo renderiza sus componentes, y cómo funciona este componente declarativo de Google Maps, porque al final, si nosotros miramos, nosotros necesitamos mover, o abrir este InfoWindow, y nosotros necesitamos el marker, recordemos que para el marker, nosotros para abrir el InfoWindow necesitamos dos cosas, el location y el marker, el marker lo pudimos obtener, aquí porque yo estoy haciendo un render, y aquí estoy creando, estoy creando el marker, estoy obteniendo la referencia del marker, y aquí se lo envío, entonces como que aquí es normal tener la referencia del marker, pero aquí en esta lista, que está totalmente separada de Google Maps, que no tiene el marker, ¿de dónde o cómo yo hago para obtener el marker y enviárselo a esta función? ahí se pone un poco complejo el asunto, ¿cómo lo vamos a hacer? aquí básicamente vamos a utilizar otro de los elementos de Angular, que es así como yo tengo un ViewChild, voy a preguntar por los markers, literalmente, y obtener esa referencia, la lista de markers que se están renderizando, entonces aquí voy a poner markers ref, por ejemplo, es mi referencia de los markers que están siendo renderizados, aquí voy a utilizar ViewChildren, ¿por qué? porque en este punto ya no necesito que sea un hijo, necesito que sean todos los markers que hay en mi componente, entonces aquí voy a poner, me voy a poner, doble marco, si, puedo poner ahora sí no, no, no, no más, nada más, si, si, si queremos verでは, lo puedo hacer con este código que decía sin 9 no, no, sin 11 no, que eso es todo, ya es un par decile<|nl|>� ok, el que tengo que poner aquí, va a mostrar," lo que va a tener aquí," angular para obtener esas referencias ahora para qué me va a servir esta referencia porque fíjate que al final estamos usando el como el mismo array estamos iterando el mismo array acá estoy iterando locations y locations entonces quiere decir que como estoy iterando el mismo array puedo utilizar la posición para saber que cuando yo le hago clic a uno de estos pues realmente debería ser la misma posición del market y buscarlo por posición ese sería una forma de solucionarlo entonces vamos a hacerlo vamos a colocar un clic aquí un clic y vamos a decirle podría ser open market no vamos a decirle go to place como ir a ese lugar entonces aquí que necesito necesito la location y bueno necesitar la posición entonces para saber la posición simplemente el envío index les voy a crear esta esta función se va a llamar go to place como ir a esa a ese lugar vamos a ponerla acá recuerden que tiene un segundo parámetro que es la posición posición y tengo un nombre listo que es la posición en la que está entonces aquí ya tiene sentido hace clic todavía entonces que va a obtener hasta ahora答اله شاهر live, Y listo, esto me devuelve un array de markers. Si los hay, si no hay, pues hay cero. Simplemente hay cero elementos. Entonces acá tengo una lista. Podría iterar o preguntar por la posición. Entonces yo necesito el marker ref. El marker ref sería igual a, pues tengo una lista y quiero la posición. Esa posición de ese marker. Entonces es como la forma de unirlo. Ahora, como ya tengo el marker, pues puedo reutilizar la función openInfoWindow. Y en teoría ya tengo location y tengo el marker.ref. Entonces vamos a ver si funciona. Entonces vamos a ver. Si yo le hago clic a este, fíjate que este es el 410 school close, bla, bla, bla. Vamos a darle clic a este. Ahí está. Es el, yo le hice clic al 10477. Me lo abre. Vamos a hacerle clic al 521. Entonces le hago clic. Ahí está. Le hice clic al 521. Y bueno, como que automáticamente ya tengo. Y fíjense que hace algo muy interesante. Y es que si yo le hago mucho zoom y el punto está en otro lado, automáticamente al hacer el infoWindow me lleva, como que me hace una animación chiquitita hasta ese punto. Entonces vamos a ver. Ahí está. Ahí está. Ahí está. Ahí está. Ahí está. Entonces ya literalmente puedo integrarlo. Puedo alejar un poquito el zoom. Obviamente cuando ya están muy pegados, pues parecerá que uno le hace clic simplemente a todos. Y lo único que me molesta es que esto no tiene el símbolo de clic que hable. Le voy a colocar el símbolo de clic que hable. Porque cursor, creo que es cursor pointer. Exacto. Para que tenga como la manita. Y me diga que esto. Esto es una cosa que puedo clickear. Entonces ahora sí. Clic, clic, clic, clic. Listo. Entonces yo voy acá. Fíjense. Si tuviera más zoom va hacia los puntos. Si tuviera menos zoom, un poquito más. Pues va y me lleva a esos puntos. Entonces ya tengo una conexión entre un área y la otra. Eso es básicamente. Eso es lo que les quería compartir hoy. Faltan algunas características más. Algunas características interesantes. Por ejemplo. Starbucks como que personaliza el marker y fíjate que les ponen como esta tacita verde. Eso también se puede personalizar. Tú puedes en vez de ponerle un marker rojo, ponerle un icono. Hay algo interesante que ellos no utilizan un info window. Lo que hacen es que si yo le hago clic, lo que hace es navegar. Me hace como un scroll hacia el punto en donde esté y me da la información. Entonces me parece mejor que me dé un info window, pero también debería ser bueno que me lleve el scroll y me lo deje como seleccionado. Como aquí. Como que me lo dejan verde, no? Entonces como que yo podría buscar un método y que me haga scroll aquí y que me lo deje seleccionado, pero igual también funciona viceversa. Si yo le hago clic acá como que navega. Y aquí si no me abre un info window. Aquí yo sí creo que debería Starbucks poner un info window y no sólo como mostrarme el puntito para como que el usuario sepa a cuál fue la que le hice clic. Esa parte si ya la tenemos bien, pero en fin, eso ya son detalles. Simplemente. Y bueno, si tú quieres ver más de esta documentación, ya te lo dejo a ti. Si quieres ya pues avanzar más en esto, yo creo que con esto ya podríamos cerrar este video y listo. Esta fue la integración de Google Maps utilizando este componente declarativo de Angular. Dime si ya sabías acerca de este componente o si como yo piensas que eso estaba por ahí escondido en la documentación súper poderoso, mantenido por el mismo equipo de Angular con una muy buena integración performance, pero escondido por allá, escondido. Casi que nadie lo encuentra, por eso quería también mostrarte lo no sólo mostrarte la integración. Yo sé que hay muchas librerías en la comunidad, pero esta es la oficial de Angular para integrarlo e integrar Google Maps dentro de Angular, así que espero que te haya gustado bastante. Hicimos desde la creación del proyecto para obtenerla aquí el mapa y de renderizar el mapa, renderizar los markers. Utilizamos los nuevos signups para hacer preguntas. El buchalbo children. Entonces, como que es bastante interesante. Toda la integración usamos signups en todo el proyecto con tus signups, etcétera, como que en este pequeñito proyecto logramos intentar integrar varias cosas del nuevo Angular o del Angular moderno y pues tener como esta interacción como la que tiene Starbucks en su página. Así que debido a todo ese esfuerzo de este demo y debido precisamente como a la preparación, espero te suscribas, me des tu like, tus comentarios, lo compartas a tus colegas, a tus amigos que quieran hacer esta integración utilizando Angular. Y ya saben cómo hacerla. Ahí también está la documentación, sé que la documentación podría ser un poquito robusta y hay que leer como el ritmo para entender cómo se utiliza, pero espero pues sea de gran ayuda para ti. Recuerda suscribirme, dejarte tu like y nos vemos en la próxima.